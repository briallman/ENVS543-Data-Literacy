<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.5.56">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Briana Allman">
<meta name="dcterms.date" content="2024-10-24">

<title>Textual Analysis</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="Textual_Analysis_files/libs/clipboard/clipboard.min.js"></script>
<script src="Textual_Analysis_files/libs/quarto-html/quarto.js"></script>
<script src="Textual_Analysis_files/libs/quarto-html/popper.min.js"></script>
<script src="Textual_Analysis_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="Textual_Analysis_files/libs/quarto-html/anchor.min.js"></script>
<link href="Textual_Analysis_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="Textual_Analysis_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="Textual_Analysis_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="Textual_Analysis_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="Textual_Analysis_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<link href="Textual_Analysis_files/libs/htmltools-fill-0.5.8.1/fill.css" rel="stylesheet">
<script src="Textual_Analysis_files/libs/htmlwidgets-1.6.4/htmlwidgets.js"></script>
<link href="Textual_Analysis_files/libs/wordcloud2-0.0.1/wordcloud.css" rel="stylesheet">
<script src="Textual_Analysis_files/libs/wordcloud2-0.0.1/wordcloud2-all.js"></script>
<script src="Textual_Analysis_files/libs/wordcloud2-0.0.1/hover.js"></script>
<script src="Textual_Analysis_files/libs/wordcloud2-binding-0.2.1/wordcloud2.js"></script>


</head>

<body class="fullcontent">

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">

<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Textual Analysis</h1>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Briana Allman </p>
          </div>
  </div>
    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">October 24, 2024</p>
    </div>
  </div>
  
    
  </div>
  


</header>


<section id="textual-analysis" class="level2">
<h2 class="anchored" data-anchor-id="textual-analysis">Textual Analysis</h2>
<p><strong><em>Regular Expressions: Plotting the number of classes in the 1XX, 2XX, and 3XX levels and making a word cloud with class name info.</em></strong></p>
<p>Loading in Packages</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>── Attaching core tidyverse packages ──────────────────────── tidyverse 2.0.0 ──
✔ dplyr     1.1.4     ✔ readr     2.1.5
✔ forcats   1.0.0     ✔ stringr   1.5.1
✔ ggplot2   3.5.1     ✔ tibble    3.2.1
✔ lubridate 1.9.3     ✔ tidyr     1.3.1
✔ purrr     1.0.2     
── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──
✖ dplyr::filter() masks stats::filter()
✖ dplyr::lag()    masks stats::lag()
ℹ Use the conflicted package (&lt;http://conflicted.r-lib.org/&gt;) to force all conflicts to become errors</code></pre>
</div>
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(stringr)</span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(readr)</span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(lubridate)</span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(wordcloud2)</span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidytext)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Reading in Data</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>url <span class="ot">&lt;-</span> <span class="st">"https://raw.githubusercontent.com/DyerlabTeaching/Textual-Data/refs/heads/main/data/ENVSclasses.txt?token=GHSAT0AAAAAACWO27UIA46V72P7DBZEP5EKZYZFFXQ"</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>envs <span class="ot">&lt;-</span> <span class="fu">read_lines</span>( url )</span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(envs, <span class="dv">25</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] "ENVS 101. Introduction to Environmental Studies I. 3 Hours."                
 [2] "Semester course; 3 lecture hours. 3 credits. Enrollment is restricted to"   
 [3] "environmental studies majors. Study of contemporary issues related to"      
 [4] "environmental studies including sustainability, biological conservation,"   
 [5] "global change and an overview of the core earth systems."                   
 [6] "ENVS 102. Introduction to Environmental Studies II. 3 Hours."               
 [7] "Semester course; 3 lecture hours. 3 credits. Prerequisite: ENVS 101 or"     
 [8] "permission of instructor. Enrollment is restricted to environmental studies"
 [9] "majors. Studies of contemporary issues related to government policy and"    
[10] "environmental issues at local to international scales."                     
[11] "886 Undergraduate courses"                                                  
[12] "ENVS 105. Physical Geology. 3 Hours."                                       
[13] "Semester course; 3 lecture hours. 3 credits. A descriptive approach to"     
[14] "physical geology dealing with the history and structure of the earth,"      
[15] "catastrophic events and geology as it relates to the contemporary"          
[16] "environment. An optional laboratory, ENVZ 105, may be taken with this"      
[17] "course."                                                                    
[18] "ENVS 201. Earth System Science. 3 Hours."                                   
[19] "Semester course; 3 lecture hours. 3 credits. An introduction to the"        
[20] "processes of and linkages among the major systems that drive planet"        
[21] "Earth. The biosphere, geosphere, hydrosphere, atmosphere and"               
[22] "sociosphere are presented as dynamic and interdependent systems."           
[23] "ENVS 222. Electronic Portfolios. 1 Hour."                                   
[24] "Semester course; 1 lecture hour (delivered online). 1 credit. This online"  
[25] "course will guide individuals in developing an electronic portfolio"        </code></pre>
</div>
</div>
<p>Data Exploration</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Creating an index based on the detection of "ENVS"</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a><span class="fu">str_detect</span>(envs, <span class="st">"ENVS"</span>) <span class="ot">-&gt;</span> idx</span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a>envs[idx]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] "ENVS 101. Introduction to Environmental Studies I. 3 Hours."             
 [2] "ENVS 102. Introduction to Environmental Studies II. 3 Hours."            
 [3] "Semester course; 3 lecture hours. 3 credits. Prerequisite: ENVS 101 or"  
 [4] "ENVS 105. Physical Geology. 3 Hours."                                    
 [5] "ENVS 201. Earth System Science. 3 Hours."                                
 [6] "ENVS 222. Electronic Portfolios. 1 Hour."                                
 [7] "ENVS 260. Outdoor Leadership. 3 Hours."                                  
 [8] "ENVS 265. Paths to Environmental Leadership. 2 Hours."                   
 [9] "Semester course; 2 lecture hours. 2 credits. Prerequisites: ENVS 101"    
[10] "and ENVS 102, both with a minimum grade of B. This course focuses"       
[11] "ENVS 291. Special Topics in Environmental Studies. 1-4 Hours."           
[12] "ENVS 300. Sustainable Societies: James River Basin. 3 Hours."            
[13] "ENVS 301. Introduction to Meteorology. 3 Hours."                         
[14] "ENVS 310. Introduction to Oceanography. 3 Hours."                        
[15] "ENVS 311. Politics of the Environment. 3 Hours."                         
[16] "ENVS 314. Human-Environment Interactions: Foundations and"               
[17] "ENVS 315. Energy and the Environment. 3 Hours."                          
[18] "ENVS 321. Cartography. 3 Hours."                                         
[19] "ENVS 330. Environmental Pollution. 3 Hours."                             
[20] "ENVS 332. Environmental Management. 3 Hours."                            
[21] "ENVS 335. Environmental Geology. 3 Hours."                               
[22] "Semester course; 3 lecture hours. 3 credits. Prerequisite: ENVS 105"     
[23] "ENVS 343. Data Literacy. 4 Hours."                                       
[24] "Semester course; 4 lecture hours. 4 credits. Prerequisites: ENVS 102"    
[25] "ENVS 355. Water. 3 Hours."                                               
[26] "ENVS 330 or permission of instructor. The course takes an ecosystem"     
[27] "ENVS 360. Outdoor Programming and Event Management. 3 Hours."            
[28] "ENVS 361. Outdoor Team Building and Group Facilitation. 3 Hours."        
[29] "ENVS 368. Nature Writing. 3 Hours."                                      
[30] "ENVS 370. Applications of Conservation Science. 3 Hours."                
[31] "Semester course; 3 lecture hours. 3 credits. Prerequisite: ENVS 343."    
[32] "ENVS 391. Special Topics in Environmental Studies. 1-4 Hours."           
[33] "ENVS 401. Meteorology and Climatology. 3 Hours."                         
[34] "ENVS 411. Oceanography. 3 Hours."                                        
[35] "ENVS 421. Environmental Data Visualization. 3 Hours."                    
[36] "ENVS 430. Invasive Species Management. 3 Hours."                         
[37] "ENVS 460. Wilderness First Responder. 3 Hours."                          
[38] "ENVS 461. Wilderness Policy and Practice. 3 Hours."                      
[39] "ENVS 490. Research Seminar in Environmental Studies. 3 Hours."           
[40] "ENVS 491. Topics in Environmental Studies. 1-4 Hours."                   
[41] "ENVS 492. Independent Study. 1-3 Hours."                                 
[42] "ENVS 493. Environmental Studies Internship. 1-3 Hours."                  
[43] "ENVS 499. Environmental Studies Capstone Experience. 0 Hours."           
[44] "Semester course; variable hours. 0 credits. Corequisite: ENVS 490,"      
[45] "ENVS 491 (when topics implement core competencies required for a"        
[46] "Environmental Studies), ENVS 492 or ENVS 493. Enrollment restricted to"  
[47] "ENVS 105, an optional laboratory course consisting of experiments and"   
[48] "activities related to ENVS 105."                                         
[49] "Semester course; 2 laboratory hours. 1 credit. Corequisite: ENVS 335."   
[50] "Required for environmental science majors enrolled in ENVS 335; optional"
[51] "Laboratory exercises coordinated with ENVS 335 lectures."                
[52] "ENVS 401. A series of laboratory and field experiments designed to"      </code></pre>
</div>
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Cuts it down a good but...but there are still extra things in the string</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a><span class="fu">length</span>(envs)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 262</code></pre>
</div>
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="fu">length</span>(envs[idx])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 52</code></pre>
</div>
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Narrowing down our search: Pattern Matching -&gt; Identify what we mean when we say we are looking for 4 uppercase letters followed by 3 numbers followed by additional text -&gt; REGULAR EXPRESSIONS</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Regular Expressions</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a>envs101 <span class="ot">&lt;-</span> envs[<span class="dv">1</span>]</span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a>envs101</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "ENVS 101. Introduction to Environmental Studies I. 3 Hours."</code></pre>
</div>
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Matching &amp; Searching Within</span></span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a><span class="fu">str_view</span>(envs101, <span class="st">"ENVS"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] │ &lt;ENVS&gt; 101. Introduction to Environmental Studies I. 3 Hours.</code></pre>
</div>
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_view</span>(envs101, <span class="st">"Hour"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] │ ENVS 101. Introduction to Environmental Studies I. 3 &lt;Hour&gt;s.</code></pre>
</div>
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_view_all</span>(envs101, <span class="st">"o"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: `str_view_all()` was deprecated in stringr 1.5.0.
ℹ Please use `str_view()` instead.</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] │ ENVS 101. Intr&lt;o&gt;ducti&lt;o&gt;n t&lt;o&gt; Envir&lt;o&gt;nmental Studies I. 3 H&lt;o&gt;urs.</code></pre>
</div>
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Shorthands -&gt; Allows us to match any numerical digit -&gt; [:digit:]</span></span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a><span class="fu">str_view</span>(envs101, <span class="st">"[:digit:]"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] │ ENVS &lt;1&gt;&lt;0&gt;&lt;1&gt;. Introduction to Environmental Studies I. &lt;3&gt; Hours.</code></pre>
</div>
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Finds 3 digits right next to each other</span></span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a><span class="fu">str_view</span>(envs101, <span class="st">"[:digit:]{2,3}"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] │ ENVS &lt;101&gt;. Introduction to Environmental Studies I. 3 Hours.</code></pre>
</div>
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Punctuation</span></span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a><span class="fu">str_view</span>(envs101, <span class="st">"[:punct:]"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] │ ENVS 101&lt;.&gt; Introduction to Environmental Studies I&lt;.&gt; 3 Hours&lt;.&gt;</code></pre>
</div>
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Letters</span></span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a><span class="fu">str_view</span>(envs101, <span class="st">"[:alpha:]"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] │ &lt;E&gt;&lt;N&gt;&lt;V&gt;&lt;S&gt; 101. &lt;I&gt;&lt;n&gt;&lt;t&gt;&lt;r&gt;&lt;o&gt;&lt;d&gt;&lt;u&gt;&lt;c&gt;&lt;t&gt;&lt;i&gt;&lt;o&gt;&lt;n&gt; &lt;t&gt;&lt;o&gt; &lt;E&gt;&lt;n&gt;&lt;v&gt;&lt;i&gt;&lt;r&gt;&lt;o&gt;&lt;n&gt;&lt;m&gt;&lt;e&gt;&lt;n&gt;&lt;t&gt;&lt;a&gt;&lt;l&gt; &lt;S&gt;&lt;t&gt;&lt;u&gt;&lt;d&gt;&lt;i&gt;&lt;e&gt;&lt;s&gt; &lt;I&gt;. 3 &lt;H&gt;&lt;o&gt;&lt;u&gt;&lt;r&gt;&lt;s&gt;.</code></pre>
</div>
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Lowercase</span></span>
<span id="cb30-2"><a href="#cb30-2" aria-hidden="true" tabindex="-1"></a><span class="fu">str_view</span>(envs101, <span class="st">"[:lower:]"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] │ ENVS 101. I&lt;n&gt;&lt;t&gt;&lt;r&gt;&lt;o&gt;&lt;d&gt;&lt;u&gt;&lt;c&gt;&lt;t&gt;&lt;i&gt;&lt;o&gt;&lt;n&gt; &lt;t&gt;&lt;o&gt; E&lt;n&gt;&lt;v&gt;&lt;i&gt;&lt;r&gt;&lt;o&gt;&lt;n&gt;&lt;m&gt;&lt;e&gt;&lt;n&gt;&lt;t&gt;&lt;a&gt;&lt;l&gt; S&lt;t&gt;&lt;u&gt;&lt;d&gt;&lt;i&gt;&lt;e&gt;&lt;s&gt; I. 3 H&lt;o&gt;&lt;u&gt;&lt;r&gt;&lt;s&gt;.</code></pre>
</div>
<div class="sourceCode cell-code" id="cb32"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Uppercase</span></span>
<span id="cb32-2"><a href="#cb32-2" aria-hidden="true" tabindex="-1"></a><span class="fu">str_view</span>(envs101, <span class="st">"[:upper:]"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] │ &lt;E&gt;&lt;N&gt;&lt;V&gt;&lt;S&gt; 101. &lt;I&gt;ntroduction to &lt;E&gt;nvironmental &lt;S&gt;tudies &lt;I&gt;. 3 &lt;H&gt;ours.</code></pre>
</div>
<div class="sourceCode cell-code" id="cb34"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Space</span></span>
<span id="cb34-2"><a href="#cb34-2" aria-hidden="true" tabindex="-1"></a><span class="fu">str_view</span>(envs101, <span class="st">"[:space:]"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] │ ENVS&lt; &gt;101.&lt; &gt;Introduction&lt; &gt;to&lt; &gt;Environmental&lt; &gt;Studies&lt; &gt;I.&lt; &gt;3&lt; &gt;Hours.</code></pre>
</div>
<div class="sourceCode cell-code" id="cb36"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a><span class="co"># ALL TOGEHTER</span></span>
<span id="cb36-2"><a href="#cb36-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-3"><a href="#cb36-3" aria-hidden="true" tabindex="-1"></a><span class="fu">str_view</span>(envs, <span class="st">"[:alpha:]{4} [:digit:]{3}"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] │ &lt;ENVS 101&gt;. Introduction to Environmental Studies I. 3 Hours.
 [6] │ &lt;ENVS 102&gt;. Introduction to Environmental Studies II. 3 Hours.
 [7] │ Semester course; 3 lecture hours. 3 credits. Prerequisite: &lt;ENVS 101&gt; or
[12] │ &lt;ENVS 105&gt;. Physical Geology. 3 Hours.
[16] │ environment. An optional laboratory, &lt;ENVZ 105&gt;, may be taken with this
[18] │ &lt;ENVS 201&gt;. Earth System Science. 3 Hours.
[23] │ &lt;ENVS 222&gt;. Electronic Portfolios. 1 Hour.
[29] │ &lt;ENVS 260&gt;. Outdoor Leadership. 3 Hours.
[36] │ &lt;ENVS 265&gt;. Paths to Environmental Leadership. 2 Hours.
[37] │ Semester course; 2 lecture hours. 2 credits. Prerequisites: &lt;ENVS 101&gt;
[38] │ and &lt;ENVS 102&gt;, both with a minimum grade of B. This course focuses
[47] │ &lt;ENVS 291&gt;. Special Topics in Environmental Studies. 1-4 Hours.
[52] │ &lt;ENVS 300&gt;. Sustainable Societies: James River Basin. 3 Hours.
[57] │ &lt;ENVS 301&gt;. Introduction to Meteorology. 3 Hours.
[64] │ &lt;ENVS 310&gt;. Introduction to Oceanography. 3 Hours.
[72] │ &lt;ENVS 311&gt;. Politics of the Environment. 3 Hours.
[78] │ its impact on policy outcomes. Crosslisted as: &lt;POLI 311&gt;.
[79] │ &lt;ENVS 314&gt;. Human-Environment Interactions: Foundations and
[86] │ theory of population biology. Crosslisted as: &lt;INTL 314&gt;.
[87] │ &lt;ENVS 315&gt;. Energy and the Environment. 3 Hours.
... and 59 more</code></pre>
</div>
<div class="sourceCode cell-code" id="cb38"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_view</span>(envs, <span class="st">"[:upper:]{4} [:digit:]{3}"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] │ &lt;ENVS 101&gt;. Introduction to Environmental Studies I. 3 Hours.
 [6] │ &lt;ENVS 102&gt;. Introduction to Environmental Studies II. 3 Hours.
 [7] │ Semester course; 3 lecture hours. 3 credits. Prerequisite: &lt;ENVS 101&gt; or
[12] │ &lt;ENVS 105&gt;. Physical Geology. 3 Hours.
[16] │ environment. An optional laboratory, &lt;ENVZ 105&gt;, may be taken with this
[18] │ &lt;ENVS 201&gt;. Earth System Science. 3 Hours.
[23] │ &lt;ENVS 222&gt;. Electronic Portfolios. 1 Hour.
[29] │ &lt;ENVS 260&gt;. Outdoor Leadership. 3 Hours.
[36] │ &lt;ENVS 265&gt;. Paths to Environmental Leadership. 2 Hours.
[37] │ Semester course; 2 lecture hours. 2 credits. Prerequisites: &lt;ENVS 101&gt;
[38] │ and &lt;ENVS 102&gt;, both with a minimum grade of B. This course focuses
[47] │ &lt;ENVS 291&gt;. Special Topics in Environmental Studies. 1-4 Hours.
[52] │ &lt;ENVS 300&gt;. Sustainable Societies: James River Basin. 3 Hours.
[57] │ &lt;ENVS 301&gt;. Introduction to Meteorology. 3 Hours.
[64] │ &lt;ENVS 310&gt;. Introduction to Oceanography. 3 Hours.
[72] │ &lt;ENVS 311&gt;. Politics of the Environment. 3 Hours.
[78] │ its impact on policy outcomes. Crosslisted as: &lt;POLI 311&gt;.
[79] │ &lt;ENVS 314&gt;. Human-Environment Interactions: Foundations and
[86] │ theory of population biology. Crosslisted as: &lt;INTL 314&gt;.
[87] │ &lt;ENVS 315&gt;. Energy and the Environment. 3 Hours.
... and 58 more</code></pre>
</div>
<div class="sourceCode cell-code" id="cb40"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Be Careful -&gt; wrong</span></span>
<span id="cb40-2"><a href="#cb40-2" aria-hidden="true" tabindex="-1"></a><span class="fu">str_view</span>(envs, <span class="st">"[:lower:]{4} [:digit:]{3}"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[176] │ VCU Undergraduate Bull&lt;etin 202&gt;3-24 887</code></pre>
</div>
<div class="sourceCode cell-code" id="cb42"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_view</span>( envs101, <span class="st">"[A-Z]{4} [0-9]{3}"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] │ &lt;ENVS 101&gt;. Introduction to Environmental Studies I. 3 Hours.</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb44"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb44-1"><a href="#cb44-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Starting point class 2</span></span>
<span id="cb44-2"><a href="#cb44-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-3"><a href="#cb44-3" aria-hidden="true" tabindex="-1"></a>pattern <span class="ot">&lt;-</span> <span class="st">"^[A-Z]{4} [0-9]{3}.+[0-9] Hour[s]?</span><span class="sc">\\</span><span class="st">.$"</span></span>
<span id="cb44-4"><a href="#cb44-4" aria-hidden="true" tabindex="-1"></a><span class="fu">grepl</span>(pattern, envs) <span class="ot">-&gt;</span> idx</span>
<span id="cb44-5"><a href="#cb44-5" aria-hidden="true" tabindex="-1"></a>titles <span class="ot">&lt;-</span> envs[idx]</span>
<span id="cb44-6"><a href="#cb44-6" aria-hidden="true" tabindex="-1"></a>titles</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] "ENVS 101. Introduction to Environmental Studies I. 3 Hours."     
 [2] "ENVS 102. Introduction to Environmental Studies II. 3 Hours."    
 [3] "ENVS 105. Physical Geology. 3 Hours."                            
 [4] "ENVS 201. Earth System Science. 3 Hours."                        
 [5] "ENVS 222. Electronic Portfolios. 1 Hour."                        
 [6] "ENVS 260. Outdoor Leadership. 3 Hours."                          
 [7] "ENVS 265. Paths to Environmental Leadership. 2 Hours."           
 [8] "ENVS 291. Special Topics in Environmental Studies. 1-4 Hours."   
 [9] "ENVS 300. Sustainable Societies: James River Basin. 3 Hours."    
[10] "ENVS 301. Introduction to Meteorology. 3 Hours."                 
[11] "ENVS 310. Introduction to Oceanography. 3 Hours."                
[12] "ENVS 311. Politics of the Environment. 3 Hours."                 
[13] "ENVS 315. Energy and the Environment. 3 Hours."                  
[14] "ENVS 321. Cartography. 3 Hours."                                 
[15] "ENVS 330. Environmental Pollution. 3 Hours."                     
[16] "ENVS 332. Environmental Management. 3 Hours."                    
[17] "ENVS 335. Environmental Geology. 3 Hours."                       
[18] "ENVS 343. Data Literacy. 4 Hours."                               
[19] "ENVS 355. Water. 3 Hours."                                       
[20] "ENVS 360. Outdoor Programming and Event Management. 3 Hours."    
[21] "ENVS 361. Outdoor Team Building and Group Facilitation. 3 Hours."
[22] "ENVS 368. Nature Writing. 3 Hours."                              
[23] "ENVS 370. Applications of Conservation Science. 3 Hours."        
[24] "ENVS 391. Special Topics in Environmental Studies. 1-4 Hours."   
[25] "ENVS 401. Meteorology and Climatology. 3 Hours."                 
[26] "ENVS 411. Oceanography. 3 Hours."                                
[27] "ENVS 421. Environmental Data Visualization. 3 Hours."            
[28] "ENVS 430. Invasive Species Management. 3 Hours."                 
[29] "ENVS 460. Wilderness First Responder. 3 Hours."                  
[30] "ENVS 461. Wilderness Policy and Practice. 3 Hours."              
[31] "ENVS 490. Research Seminar in Environmental Studies. 3 Hours."   
[32] "ENVS 491. Topics in Environmental Studies. 1-4 Hours."           
[33] "ENVS 492. Independent Study. 1-3 Hours."                         
[34] "ENVS 493. Environmental Studies Internship. 1-3 Hours."          
[35] "ENVS 499. Environmental Studies Capstone Experience. 0 Hours."   
[36] "ENVZ 105. Physical Geology Laboratory. 1 Hour."                  
[37] "ENVZ 335. Environmental Geology Laboratory. 1 Hour."             
[38] "ENVZ 401. Meteorology and Climatology Laboratory. 1 Hour."       </code></pre>
</div>
<div class="sourceCode cell-code" id="cb46"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb46-1"><a href="#cb46-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_split</span>(titles, <span class="at">pattern =</span> <span class="st">"</span><span class="sc">\\</span><span class="st">."</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[[1]]
[1] "ENVS 101"                                
[2] " Introduction to Environmental Studies I"
[3] " 3 Hours"                                
[4] ""                                        

[[2]]
[1] "ENVS 102"                                 
[2] " Introduction to Environmental Studies II"
[3] " 3 Hours"                                 
[4] ""                                         

[[3]]
[1] "ENVS 105"          " Physical Geology" " 3 Hours"         
[4] ""                 

[[4]]
[1] "ENVS 201"              " Earth System Science" " 3 Hours"             
[4] ""                     

[[5]]
[1] "ENVS 222"               " Electronic Portfolios" " 1 Hour"               
[4] ""                      

[[6]]
[1] "ENVS 260"            " Outdoor Leadership" " 3 Hours"           
[4] ""                   

[[7]]
[1] "ENVS 265"                           " Paths to Environmental Leadership"
[3] " 2 Hours"                           ""                                  

[[8]]
[1] "ENVS 291"                                
[2] " Special Topics in Environmental Studies"
[3] " 1-4 Hours"                              
[4] ""                                        

[[9]]
[1] "ENVS 300"                                 
[2] " Sustainable Societies: James River Basin"
[3] " 3 Hours"                                 
[4] ""                                         

[[10]]
[1] "ENVS 301"                     " Introduction to Meteorology"
[3] " 3 Hours"                     ""                            

[[11]]
[1] "ENVS 310"                      " Introduction to Oceanography"
[3] " 3 Hours"                      ""                             

[[12]]
[1] "ENVS 311"                     " Politics of the Environment"
[3] " 3 Hours"                     ""                            

[[13]]
[1] "ENVS 315"                    " Energy and the Environment"
[3] " 3 Hours"                    ""                           

[[14]]
[1] "ENVS 321"     " Cartography" " 3 Hours"     ""            

[[15]]
[1] "ENVS 330"                 " Environmental Pollution"
[3] " 3 Hours"                 ""                        

[[16]]
[1] "ENVS 332"                  " Environmental Management"
[3] " 3 Hours"                  ""                         

[[17]]
[1] "ENVS 335"               " Environmental Geology" " 3 Hours"              
[4] ""                      

[[18]]
[1] "ENVS 343"       " Data Literacy" " 4 Hours"       ""              

[[19]]
[1] "ENVS 355" " Water"   " 3 Hours" ""        

[[20]]
[1] "ENVS 360"                                 
[2] " Outdoor Programming and Event Management"
[3] " 3 Hours"                                 
[4] ""                                         

[[21]]
[1] "ENVS 361"                                     
[2] " Outdoor Team Building and Group Facilitation"
[3] " 3 Hours"                                     
[4] ""                                             

[[22]]
[1] "ENVS 368"        " Nature Writing" " 3 Hours"        ""               

[[23]]
[1] "ENVS 370"                             
[2] " Applications of Conservation Science"
[3] " 3 Hours"                             
[4] ""                                     

[[24]]
[1] "ENVS 391"                                
[2] " Special Topics in Environmental Studies"
[3] " 1-4 Hours"                              
[4] ""                                        

[[25]]
[1] "ENVS 401"                     " Meteorology and Climatology"
[3] " 3 Hours"                     ""                            

[[26]]
[1] "ENVS 411"      " Oceanography" " 3 Hours"      ""             

[[27]]
[1] "ENVS 421"                          " Environmental Data Visualization"
[3] " 3 Hours"                          ""                                 

[[28]]
[1] "ENVS 430"                     " Invasive Species Management"
[3] " 3 Hours"                     ""                            

[[29]]
[1] "ENVS 460"                    " Wilderness First Responder"
[3] " 3 Hours"                    ""                           

[[30]]
[1] "ENVS 461"                        " Wilderness Policy and Practice"
[3] " 3 Hours"                        ""                               

[[31]]
[1] "ENVS 490"                                  
[2] " Research Seminar in Environmental Studies"
[3] " 3 Hours"                                  
[4] ""                                          

[[32]]
[1] "ENVS 491"                         " Topics in Environmental Studies"
[3] " 1-4 Hours"                       ""                                

[[33]]
[1] "ENVS 492"           " Independent Study" " 1-3 Hours"        
[4] ""                  

[[34]]
[1] "ENVS 493"                          " Environmental Studies Internship"
[3] " 1-3 Hours"                        ""                                 

[[35]]
[1] "ENVS 499"                                  
[2] " Environmental Studies Capstone Experience"
[3] " 0 Hours"                                  
[4] ""                                          

[[36]]
[1] "ENVZ 105"                     " Physical Geology Laboratory"
[3] " 1 Hour"                      ""                            

[[37]]
[1] "ENVZ 335"                          " Environmental Geology Laboratory"
[3] " 1 Hour"                           ""                                 

[[38]]
[1] "ENVZ 401"                               
[2] " Meteorology and Climatology Laboratory"
[3] " 1 Hour"                                
[4] ""                                       </code></pre>
</div>
<div class="sourceCode cell-code" id="cb48"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb48-1"><a href="#cb48-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_split</span>(titles, <span class="at">pattern =</span> <span class="st">"</span><span class="sc">\\</span><span class="st">."</span>, <span class="at">simplify =</span> <span class="cn">TRUE</span>) <span class="ot">-&gt;</span> raw   <span class="co">#This is a Matrix</span></span>
<span id="cb48-2"><a href="#cb48-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-3"><a href="#cb48-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-4"><a href="#cb48-4" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span> (raw)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     [,1]       [,2]                                        [,3]       [,4]
[1,] "ENVS 101" " Introduction to Environmental Studies I"  " 3 Hours" ""  
[2,] "ENVS 102" " Introduction to Environmental Studies II" " 3 Hours" ""  
[3,] "ENVS 105" " Physical Geology"                         " 3 Hours" ""  
[4,] "ENVS 201" " Earth System Science"                     " 3 Hours" ""  
[5,] "ENVS 222" " Electronic Portfolios"                    " 1 Hour"  ""  
[6,] "ENVS 260" " Outdoor Leadership"                       " 3 Hours" ""  </code></pre>
</div>
<div class="sourceCode cell-code" id="cb50"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb50-1"><a href="#cb50-1" aria-hidden="true" tabindex="-1"></a><span class="fu">data.frame</span>(<span class="at">course =</span> raw[,<span class="dv">1</span>],</span>
<span id="cb50-2"><a href="#cb50-2" aria-hidden="true" tabindex="-1"></a>                           <span class="at">title =</span> <span class="fu">str_trim</span>(raw[,<span class="dv">2</span>]),</span>
<span id="cb50-3"><a href="#cb50-3" aria-hidden="true" tabindex="-1"></a>                           <span class="at">hours =</span> <span class="fu">str_trim</span>(raw[,<span class="dv">3</span>])) <span class="sc">%&gt;%</span> </span>
<span id="cb50-4"><a href="#cb50-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">hours =</span> <span class="fu">str_remove</span>(hours, <span class="st">" Hours?$"</span>)) <span class="ot">-&gt;</span> df</span>
<span id="cb50-5"><a href="#cb50-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-6"><a href="#cb50-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Splitting the course to seperate program</span></span>
<span id="cb50-7"><a href="#cb50-7" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> df <span class="sc">%&gt;%</span></span>
<span id="cb50-8"><a href="#cb50-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">separate</span>(course, <span class="at">into =</span> <span class="fu">c</span>(<span class="st">"program"</span>, <span class="st">"course"</span>), <span class="at">sep =</span> <span class="st">" "</span>)</span>
<span id="cb50-9"><a href="#cb50-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-10"><a href="#cb50-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Making them numeric and making topics 1 credit</span></span>
<span id="cb50-11"><a href="#cb50-11" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> df <span class="sc">%&gt;%</span></span>
<span id="cb50-12"><a href="#cb50-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">hours =</span> <span class="fu">case_when</span>(</span>
<span id="cb50-13"><a href="#cb50-13" aria-hidden="true" tabindex="-1"></a>    <span class="fu">str_detect</span>(hours, <span class="st">"-"</span>) <span class="sc">~</span> <span class="fu">as.numeric</span>(<span class="fu">str_extract</span>(hours, <span class="st">"^[0-9]+"</span>)),</span>
<span id="cb50-14"><a href="#cb50-14" aria-hidden="true" tabindex="-1"></a>    <span class="cn">TRUE</span> <span class="sc">~</span> <span class="fu">as.numeric</span>(hours)</span>
<span id="cb50-15"><a href="#cb50-15" aria-hidden="true" tabindex="-1"></a>  ))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: There was 1 warning in `mutate()`.
ℹ In argument: `hours = case_when(...)`.
Caused by warning:
! NAs introduced by coercion</code></pre>
</div>
</div>
<p>Creating Plot for Classes</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb52"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb52-1"><a href="#cb52-1" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> df <span class="sc">%&gt;%</span></span>
<span id="cb52-2"><a href="#cb52-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">course =</span> <span class="fu">as.numeric</span>(course))</span>
<span id="cb52-3"><a href="#cb52-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb52-4"><a href="#cb52-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Extract course level by taking the hundreds digit directly from numeric values</span></span>
<span id="cb52-5"><a href="#cb52-5" aria-hidden="true" tabindex="-1"></a>envs_levels <span class="ot">&lt;-</span> <span class="fu">as.character</span>(<span class="fu">floor</span>(df<span class="sc">$</span>course <span class="sc">/</span> <span class="dv">100</span>) <span class="sc">*</span> <span class="dv">100</span>)</span>
<span id="cb52-6"><a href="#cb52-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb52-7"><a href="#cb52-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Convert to a data frame for easier manipulation</span></span>
<span id="cb52-8"><a href="#cb52-8" aria-hidden="true" tabindex="-1"></a>envs_levels_df <span class="ot">&lt;-</span> <span class="fu">tibble</span>(<span class="at">course =</span> df<span class="sc">$</span>course, <span class="at">level =</span> envs_levels)</span>
<span id="cb52-9"><a href="#cb52-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb52-10"><a href="#cb52-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Group by general course level (100, 200, etc.) and count the courses in each</span></span>
<span id="cb52-11"><a href="#cb52-11" aria-hidden="true" tabindex="-1"></a>level_counts <span class="ot">&lt;-</span> envs_levels_df <span class="sc">%&gt;%</span></span>
<span id="cb52-12"><a href="#cb52-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(level) <span class="sc">%&gt;%</span></span>
<span id="cb52-13"><a href="#cb52-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">count =</span> <span class="fu">n</span>(), <span class="at">.groups =</span> <span class="st">'drop'</span>)</span>
<span id="cb52-14"><a href="#cb52-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb52-15"><a href="#cb52-15" aria-hidden="true" tabindex="-1"></a><span class="co"># Check if level_counts has data</span></span>
<span id="cb52-16"><a href="#cb52-16" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(level_counts)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 4 × 2
  level count
  &lt;chr&gt; &lt;int&gt;
1 100       4
2 200       5
3 300      17
4 400      12</code></pre>
</div>
<div class="sourceCode cell-code" id="cb54"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb54-1"><a href="#cb54-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Plotting the course levels</span></span>
<span id="cb54-2"><a href="#cb54-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(level_counts, <span class="fu">aes</span>(<span class="at">x =</span> level, <span class="at">y =</span> count, <span class="at">fill =</span> level)) <span class="sc">+</span></span>
<span id="cb54-3"><a href="#cb54-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="at">stat =</span> <span class="st">"identity"</span>, <span class="at">width =</span> <span class="fl">0.6</span>) <span class="sc">+</span></span>
<span id="cb54-4"><a href="#cb54-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_brewer</span>(<span class="at">palette =</span> <span class="st">"Blues"</span>) <span class="sc">+</span></span>
<span id="cb54-5"><a href="#cb54-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb54-6"><a href="#cb54-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb54-7"><a href="#cb54-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"Number of Courses by Level"</span>,</span>
<span id="cb54-8"><a href="#cb54-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">"Course Level"</span>,</span>
<span id="cb54-9"><a href="#cb54-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="st">"Number of Courses"</span></span>
<span id="cb54-10"><a href="#cb54-10" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb54-11"><a href="#cb54-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(</span>
<span id="cb54-12"><a href="#cb54-12" aria-hidden="true" tabindex="-1"></a>    <span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="fl">0.5</span>, <span class="at">face =</span> <span class="st">"bold"</span>, <span class="at">size =</span> <span class="dv">16</span>),</span>
<span id="cb54-13"><a href="#cb54-13" aria-hidden="true" tabindex="-1"></a>    <span class="at">axis.title =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">14</span>),</span>
<span id="cb54-14"><a href="#cb54-14" aria-hidden="true" tabindex="-1"></a>    <span class="at">axis.text =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">12</span>),</span>
<span id="cb54-15"><a href="#cb54-15" aria-hidden="true" tabindex="-1"></a>    <span class="at">legend.position =</span> <span class="st">"none"</span></span>
<span id="cb54-16"><a href="#cb54-16" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb54-17"><a href="#cb54-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_text</span>(<span class="fu">aes</span>(<span class="at">label =</span> count), <span class="at">vjust =</span> <span class="sc">-</span><span class="fl">0.3</span>, <span class="at">size =</span> <span class="dv">4</span>) <span class="sc">+</span></span>
<span id="cb54-18"><a href="#cb54-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">expand_limits</span>(<span class="at">y =</span> <span class="fu">max</span>(level_counts<span class="sc">$</span>count) <span class="sc">*</span> <span class="fl">1.1</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Textual_Analysis_files/figure-html/unnamed-chunk-6-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>Word Cloud with full course title</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb55"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb55-1"><a href="#cb55-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create a word frequency table</span></span>
<span id="cb55-2"><a href="#cb55-2" aria-hidden="true" tabindex="-1"></a>word_freq <span class="ot">&lt;-</span> df <span class="sc">%&gt;%</span></span>
<span id="cb55-3"><a href="#cb55-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(title, <span class="at">sort =</span> <span class="cn">TRUE</span>)</span>
<span id="cb55-4"><a href="#cb55-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb55-5"><a href="#cb55-5" aria-hidden="true" tabindex="-1"></a><span class="fu">wordcloud2</span>(word_freq, <span class="at">size =</span> <span class="fl">0.15</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="wordcloud2 html-widget html-fill-item" id="htmlwidget-0e84aa7057caca695508" style="width:100%;height:464px;"></div>
<script type="application/json" data-for="htmlwidget-0e84aa7057caca695508">{"x":{"word":["Special Topics in Environmental Studies","Applications of Conservation Science","Cartography","Data Literacy","Earth System Science","Electronic Portfolios","Energy and the Environment","Environmental Data Visualization","Environmental Geology","Environmental Geology Laboratory","Environmental Management","Environmental Pollution","Environmental Studies Capstone Experience","Environmental Studies Internship","Independent Study","Introduction to Environmental Studies I","Introduction to Environmental Studies II","Introduction to Meteorology","Introduction to Oceanography","Invasive Species Management","Meteorology and Climatology","Meteorology and Climatology Laboratory","Nature Writing","Oceanography","Outdoor Leadership","Outdoor Programming and Event Management","Outdoor Team Building and Group Facilitation","Paths to Environmental Leadership","Physical Geology","Physical Geology Laboratory","Politics of the Environment","Research Seminar in Environmental Studies","Sustainable Societies: James River Basin","Topics in Environmental Studies","Water","Wilderness First Responder","Wilderness Policy and Practice"],"freq":[2,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],"fontFamily":"Segoe UI","fontWeight":"bold","color":"random-dark","minSize":0,"weightFactor":13.5,"backgroundColor":"white","gridSize":0,"minRotation":-0.7853981633974483,"maxRotation":0.7853981633974483,"shuffle":true,"rotateRatio":0.4,"shape":"circle","ellipticity":0.65,"figBase64":null,"hover":null},"evals":[],"jsHooks":{"render":[{"code":"function(el,x){\n                        console.log(123);\n                        if(!iii){\n                          window.location.reload();\n                          iii = False;\n\n                        }\n  }","data":null}]}}</script>
</div>
</div>
<p>Word Cloud based on word frequency in course titles</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb56"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb56-1"><a href="#cb56-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Step 1: Tokenize the words in the course titles</span></span>
<span id="cb56-2"><a href="#cb56-2" aria-hidden="true" tabindex="-1"></a>word_freq_2 <span class="ot">&lt;-</span> df <span class="sc">%&gt;%</span></span>
<span id="cb56-3"><a href="#cb56-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">unnest_tokens</span>(word, title) <span class="sc">%&gt;%</span>  <span class="co"># Break titles into individual words</span></span>
<span id="cb56-4"><a href="#cb56-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(word, <span class="at">sort =</span> <span class="cn">TRUE</span>)        <span class="co"># Count each unique word's occurrence</span></span>
<span id="cb56-5"><a href="#cb56-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-6"><a href="#cb56-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Step 2: Remove common stop words if desired</span></span>
<span id="cb56-7"><a href="#cb56-7" aria-hidden="true" tabindex="-1"></a><span class="co"># You can use the `stop_words` dataset in the `tidytext` package to remove them</span></span>
<span id="cb56-8"><a href="#cb56-8" aria-hidden="true" tabindex="-1"></a><span class="co"># install.packages("tidytext")  # if you don't have tidytext installed</span></span>
<span id="cb56-9"><a href="#cb56-9" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidytext)</span>
<span id="cb56-10"><a href="#cb56-10" aria-hidden="true" tabindex="-1"></a>word_freq_2 <span class="ot">&lt;-</span> word_freq_2 <span class="sc">%&gt;%</span></span>
<span id="cb56-11"><a href="#cb56-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">anti_join</span>(stop_words, <span class="at">by =</span> <span class="st">"word"</span>)</span>
<span id="cb56-12"><a href="#cb56-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-13"><a href="#cb56-13" aria-hidden="true" tabindex="-1"></a><span class="co"># Step 3: Generate the word cloud</span></span>
<span id="cb56-14"><a href="#cb56-14" aria-hidden="true" tabindex="-1"></a><span class="fu">wordcloud2</span>(word_freq_2, <span class="at">size =</span> <span class="fl">1.0</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="wordcloud2 html-widget html-fill-item" id="htmlwidget-1ee29d153a36e589dfcc" style="width:100%;height:464px;"></div>
<script type="application/json" data-for="htmlwidget-1ee29d153a36e589dfcc">{"x":{"word":["environmental","studies","geology","introduction","laboratory","management","meteorology","outdoor","topics","climatology","data","environment","leadership","oceanography","physical","science","special","wilderness","applications","basin","building","capstone","cartography","conservation","earth","electronic","energy","event","experience","facilitation","ii","independent","internship","invasive","james","literacy","nature","paths","policy","politics","pollution","portfolios","practice","programming","research","responder","river","seminar","societies","species","study","sustainable","system","team","visualization","water","writing"],"freq":[14,8,4,4,3,3,3,3,3,2,2,2,2,2,2,2,2,2,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],"fontFamily":"Segoe UI","fontWeight":"bold","color":"random-dark","minSize":0,"weightFactor":12.85714285714286,"backgroundColor":"white","gridSize":0,"minRotation":-0.7853981633974483,"maxRotation":0.7853981633974483,"shuffle":true,"rotateRatio":0.4,"shape":"circle","ellipticity":0.65,"figBase64":null,"hover":null},"evals":[],"jsHooks":{"render":[{"code":"function(el,x){\n                        console.log(123);\n                        if(!iii){\n                          window.location.reload();\n                          iii = False;\n\n                        }\n  }","data":null}]}}</script>
</div>
</div>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    // For code content inside modals, clipBoardJS needs to be initialized with a container option
    // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>